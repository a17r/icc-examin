Summary:    ICC profile viewer and colour visualisation
Requires:   oyranos-ui-fltk oyranos-monitor
Name:       icc_examin
License:    GPL-2.0+,LGPL-2.0+
Group:      Productivity/Graphics/Other
Url:        http://www.behrmann.name

BuildRoot:      %{_tmppath}/%{name}-%{version}-build
BuildRequires:  gcc-c++ gettext fltk-devel pkgconfig
BuildRequires:  libpng-devel libjpeg-devel libtiff-devel liboyranos-alpha-devel
BuildRequires:  libxml2-devel ftgl-devel shared-mime-info
BuildRequires:  desktop-file-utils

%if 0%{?suse_version} > 910
BuildRequires:  expat fontconfig-devel freetype2-devel gcc gcc-c++
BuildRequires:  gettext gettext-devel libjpeg-devel libpng-devel
BuildRequires:  pkgconfig zlib-devel
%endif

%if 0%{?suse_version} > 1010
Recommends:   oyranos-monitor-nvidia freefont
BuildRequires:  Mesa Mesa-devel xorg-x11-fonts-devel xorg-x11-libICE
BuildRequires:  xorg-x11-libICE-devel xorg-x11-libSM
BuildRequires:  xorg-x11 xorg-x11-devel xorg-x11-libSM-devel 
BuildRequires:  xorg-x11-libX11 xorg-x11-libX11-devel
BuildRequires:  xorg-x11-libXau xorg-x11-libXau-devel 
BuildRequires:  xorg-x11-libXdmcp xorg-x11-libXdmcp-devel
BuildRequires:  xorg-x11-libXext xorg-x11-libXext-devel
BuildRequires:  xorg-x11-libXfixes xorg-x11-libXfixes-devel
BuildRequires:  xorg-x11-libXmu xorg-x11-libXmu-devel xorg-x11-libXp
BuildRequires:  xorg-x11-libXp-devel xorg-x11-libXpm
BuildRequires:  xorg-x11-libXpm-devel xorg-x11-libXprintUtil
BuildRequires:  xorg-x11-libXprintUtil-devel xorg-x11-libXrender
BuildRequires:  xorg-x11-libXrender-devel xorg-x11-libXt
BuildRequires:  xorg-x11-libXt-devel xorg-x11-libXv xorg-x11-libXv-devel
BuildRequires:  xorg-x11-libfontenc xorg-x11-libfontenc-devel
BuildRequires:  xorg-x11-libs xorg-x11-libxkbfile 
BuildRequires:  xorg-x11-libxkbfile-devel xorg-x11-proto-devel
BuildRequires:  xorg-x11-util-devel xorg-x11-xtrans-devel
BuildRequires:  liblcms-devel xdg-utils update-desktop-files
%endif

%if 0%{?mandriva_version} > 0
Recommends: oyranos-monitor-nvidia
BuildRequires:  Mesa X11-devel lcms-devel xdg-utils libgomp-devel libtool-devel
%endif

%if 0%{?fedora_version} > 0
Recommends: oyranos-monitor-nvidia
BuildRequires:  Mesa-devel xorg-x11-devel xorg-x11-Mesa-devel libXxf86vm-devel libXmu-devel libXpm-devel qt3-devel lcms-devel xdg-utils elektra-devel libXcm0
%endif

%if 0%{?debian_version} > 0
BuildRequires:  xorg-x11 xorg-x11-devel xorg-x11-Mesa-devel xorg-x11-libXext xorg-x11-libXext-devel  xorg-x11-libXpm xorg-x11-libXpm-devel cinepaint-devel-0.25
%endif

%description
ICC Examin is a small utility (unix name: iccexamin) for the
purpose of watching the internals of ICC profiles, measurement
data (CGATS), colour samples (named colour profiles), gamut 
visualisations (vrml), video card gamma tables (Xorg/XFree86/osX).


Authors:
--------
    ICC Examin  Kai-Uwe Behrmann <www.behrmann.name>

used components:
    agv         Philip Winston
    bsp         Norman Chin
    FLTK code snippets  Bill Spitzak and others <www.fltk.org>

Translators:
cs:                  Milan Knizek <knizek@volny.cz> 2008
de:                  Kai-Uwe Behrmann <www.behrmann.name>
eu:                  Iñaki Larrañaga Murgoitio <dooteo@euskalgnu.org>, 2007
fr:                  Pascal LACROIX <lacroixpascal at vfemail.net>, 2006


%prep
%setup -q

%build
export CFLAGS="%{optflags}"
%configure
make %{_smp_mflags} || make

%install
make DESTDIR=%{buildroot} install
%find_lang %{name}       # generate a special file list
%if 0%{?suse_version} > 1010
find %{buildroot} -type f -name "*.ttf" -delete -print
%suse_update_desktop_file -n  iccexamin # some openSUSE magic
%endif

%post
update-mime-database %{_datadir}/mime/

%postun
update-mime-database %{_datadir}/mime/

%files -f %{name}.lang
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog README
%{_bindir}/iccexamin
%{desktopdir}/iccexamin.desktop
%{pixmapdir}/iccexamin.png
%dir %{pixmapdir}/hicolor
%dir %{pixmapdir}/hicolor/scalable
%{pixmapdir}/hicolor/scalable/iccexamin.svg
%if 0%{?suse_version} < 1010
%{_datadir}/fonts/FreeSans.ttf
%endif
%{_mandir}/man1/iccexamin.*


%changelog
* Mon Jul 04 2011 Kai-Uwe Behrmann
- add man page

* Wed Mar 11 2009 Kai-Uwe Behrmann
- add icc_examin.svg

* Thu Dec 11 2008 Kai-Uwe Behrmann
- add CinéPaint plug-in
- add Oyranos dependencies

* Mon Mar 02 2006 Kai-Uwe Behrmann
- name-majorversion.minorversion-releaseversion.xxx sheme

* Fri Aug 12 2005 Kai-Uwe Behrmann
- GUI improvements

* Tue May 26 2005 Kai-Uwe Behrmann
- GUI improvements
- translation to german in v0.30

* Tue Apr 21 2005 Kai-Uwe Behrmann
- first release


